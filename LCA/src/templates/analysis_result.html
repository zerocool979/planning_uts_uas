<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sedang Menganalisis Kecocokan - Love Compatibility Analyzer</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <!-- Load Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Menggunakan font Inter secara default */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Warna Brand Tazkia */
        .color-darkblue { background-color: #001f3f; }
        .color-darkblue-text { color: #001f3f; }
        .color-lightblue { background-color: #4a90e2; }
        .color-orange { background-color: #ff8c00; }
        .color-orange-text { color: #ff8c00; }

        /* Background Gradasi Putih-Biru Muda */
        .loading-bg {
            background: linear-gradient(180deg, #f0f7ff 0%, #ffffff 30%);
        }

        /* Animasi Hati Berdenyut (Pulsating Heart) */
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.15); opacity: 1; }
        }

        .heart-pulse {
            animation: pulse 1.5s infinite ease-in-out;
            filter: drop-shadow(0 0 10px rgba(74, 144, 226, 0.5));
        }

        /* Animasi Progress Bar Gradasi (Biru ke Oranye) */
        @keyframes progress-slide {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        .progress-bar-fill {
            background-image: linear-gradient(90deg, #4a90e2 0%, #ff8c00 100%);
            animation: progress-slide 5s forwards; /* Durasi total loading */
        }

        /* Animasi Fade-In & Shake Ring AI (Untuk teks dinamis) */
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-10px); }
            10% { opacity: 1; transform: translateY(0); }
            90% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(10px); }
        }

        .dynamic-text {
            animation: fadeInOut 5s infinite; /* Harus sesuai dengan durasi interval JS */
        }
    </style>
</head>
<body class="loading-bg min-h-screen flex flex-col items-center justify-center p-6">

    <div class="text-center max-w-lg w-full">

        <!-- Animasi Utama: Hati Berdenyut (Biru Muda) -->
        <div id="loading-animation" class="mb-8">
            <i data-lucide="heart-handshake" class="heart-pulse w-24 h-24 text-lightblue mx-auto"></i>
        </div>

        <!-- Judul Utama -->
        <h1 class="text-3xl sm:text-4xl font-extrabold color-darkblue-text mb-4">
            Proses Analisis Kecocokan Dimulai
        </h1>

        <!-- Teks Dinamis dan Pesan Status -->
        <p id="status-message" class="text-lg font-semibold text-gray-700 transition duration-300 dynamic-text">
            Menganalisis profil kamu dan pasangan...
        </p>

        <!-- Pesan Keterangan -->
        <p class="text-sm text-gray-500 mt-6 mb-10">
            <i data-lucide="clock" class="w-4 h-4 inline mr-1 text-lightblue"></i>
            Proses ini memerlukan beberapa detik (sekitar 5-10 detik di backend). Mohon tunggu dengan sabar ðŸ˜Š
        </p>

        <!-- Progress Bar (Menyimulasikan Kemajuan) -->
        <div class="w-full h-2 color-darkblue rounded-full overflow-hidden shadow-inner">
            <div id="progress-bar" class="progress-bar-fill h-full rounded-full"></div>
        </div>
        
        <!-- Tombol Aksi (Awalnya Tersembunyi) -->
        <div id="action-area" class="mt-8 opacity-0 pointer-events-none transition-opacity duration-500">
            <a href="/dashboard" id="view-results-button"
                class="inline-flex items-center px-8 py-4 rounded-full font-bold text-sm text-white color-orange shadow-xl hover:shadow-2xl hover:bg-orange-600 focus:outline-none focus:ring-4 focus:ring-orange-300 transition duration-300 ease-in-out">
                <i data-lucide="sparkles" class="w-5 h-5 inline mr-2"></i>
                Lihat Hasil Sekarang!
            </a>
        </div>
        
    </div>

    <!-- Footer Kecil -->
    <footer class="absolute bottom-4 text-center w-full">
        <p class="text-xs text-gray-500 opacity-80">
            &copy; 2025 Love Compatibility Analyzer â€“ STMIK Tazkia, Fakultas Sains dan Teknologi.
        </p>
    </footer>

    <!-- Script Logika Loading dan Teks Dinamis -->
    <script>
        lucide.createIcons();

        const statusMessages = [
            "Menganalisis profil kamu dan pasangan...",
            "Menghitung tingkat kecocokan berdasarkan Machine Learning...",
            "Meminta narasi cinta dari Gemini AI...",
            "Hampir selesai, menyiapkan hasil analisis..."
        ];

        let messageIndex = 0;
        const statusMessageElement = document.getElementById('status-message');
        const totalDuration = 5000; // Total waktu simulasi loading (5 detik)
        const intervalTime = totalDuration / statusMessages.length;
        const actionArea = document.getElementById('action-area');
        const progressBar = document.getElementById('progress-bar');

        // Fungsi untuk mengganti teks status
        function updateStatusMessage() {
            if (messageIndex < statusMessages.length) {
                // Reset animasi sebelum mengganti teks
                statusMessageElement.classList.remove('dynamic-text');
                statusMessageElement.offsetWidth; // Trigger reflow
                statusMessageElement.classList.add('dynamic-text');
                
                statusMessageElement.textContent = statusMessages[messageIndex];
                messageIndex++;
            }
        }

        // 1. Ganti teks setiap interval
        const messageInterval = setInterval(updateStatusMessage, intervalTime);
        updateStatusMessage(); // Panggil pertama kali

        // 2. Setelah loading selesai
        setTimeout(() => {
            clearInterval(messageInterval);
            
            // Set status akhir
            statusMessageElement.textContent = "Analisis Selesai! Klik untuk Lanjutkan.";
            statusMessageElement.classList.remove('text-gray-700', 'dynamic-text');
            statusMessageElement.classList.add('color-orange-text', 'font-extrabold', 'text-xl');

            // Hentikan animasi progress bar dan set 100%
            progressBar.style.animation = 'none';
            progressBar.style.width = '100%';
            
            // Tampilkan tombol aksi dan aktifkan (Simulasi Redirect Flask)
            actionArea.classList.remove('opacity-0', 'pointer-events-none');
            actionArea.classList.add('opacity-100');

            // Tambahkan simulasi redirect 2 detik setelah tombol muncul
            setTimeout(() => {
                // Hapus baris di bawah ini dan ganti dengan:
                // window.location.href = '/dashboard';
                console.log("Simulasi: Redirect ke Dashboard. (Hapus console.log ini dan aktifkan window.location.href di Flask/Production)");
                
            }, 2000); // Redirect otomatis 2 detik setelah selesai.

        }, totalDuration);

    </script>
</body>
</html>
